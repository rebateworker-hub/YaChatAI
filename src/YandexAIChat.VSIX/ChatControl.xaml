<UserControl x:Class="YandexAIChat.ChatControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:YandexAIChat"
             Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}">
  <DockPanel>

    <!-- Top control panel -->
    <StackPanel DockPanel.Dock="Top"
                Orientation="Horizontal"
                Margin="5,5,5,5">
      <TextBox x:Name="PromptInput"
               Width="300"
               MinHeight="28"
               VerticalContentAlignment="Center"
               KeyDown="PromptInput_KeyDown"
               ToolTip="Enter your prompt here (Press Enter to send)" />
      <Button x:Name="SendButton"
              Content="Send"
              Width="70"
              Margin="5,0,0,0"
              Click="SendButton_Click"
              ToolTip="Send prompt to AI" />
      <Button Content="ðŸŽ¤ Voice"
              Width="75"
              Margin="5,0,0,0"
              Click="VoiceButton_Click"
              ToolTip="Use voice input (Yandex SpeechKit)" />
      <ComboBox x:Name="ModeSelector"
                Width="130"
                Margin="5,0,0,0"
                ToolTip="Select AI interaction mode">
        <ComboBoxItem Content="Generation" IsSelected="True" />
        <ComboBoxItem Content="Refactoring" />
        <ComboBoxItem Content="Explanation" />
        <ComboBoxItem Content="Visualization" />
        <ComboBoxItem Content="Security Analysis" />
        <ComboBoxItem Content="Planning" />
        <ComboBoxItem Content="Bug Fix" />
        <ComboBoxItem Content="Suggest Tools" />
      </ComboBox>
      <Button Content="History"
              Width="70"
              Margin="5,0,0,0"
              Click="HistoryButton_Click"
              ToolTip="View prompt history" />
      <Button Content="Settings"
              Width="70"
              Margin="5,0,0,0"
              Click="SettingsButton_Click"
              ToolTip="Configure API keys and settings" />
    </StackPanel>

    <!-- Status bar -->
    <StatusBar DockPanel.Dock="Bottom" Height="22">
      <StatusBarItem>
        <TextBlock x:Name="StatusText" Text="Ready" />
      </StatusBarItem>
      <StatusBarItem HorizontalAlignment="Right">
        <ProgressBar x:Name="LoadingIndicator"
                     Width="100"
                     Height="12"
                     IsIndeterminate="True"
                     Visibility="Collapsed" />
      </StatusBarItem>
    </StatusBar>

    <!-- Chat area -->
    <ScrollViewer x:Name="ChatScrollViewer"
                  VerticalScrollBarVisibility="Auto"
                  HorizontalScrollBarVisibility="Disabled">
      <StackPanel x:Name="ChatContainer"
                  Margin="5">
        <!-- Messages are dynamically added here -->
      </StackPanel>
    </ScrollViewer>

  </DockPanel>
</UserControl>
